
<div class="row">

    <div class="col-sm-6">
        <div class="panel panel-default panel-phantasma">
            <div class="panel-heading">Phantasma Overview</div>
            <div class="panel-body">
                <table class="table" style="margin-bottom: 0;">
                    <tbody>
                        <tr>
                            <td class="home-label">Market Cap</td>
                            <td class="home-label-value">{{#async marketcap}}</td>
                        </tr>
                        <tr>
                            <td class="home-label">Main chain last block</td>
                            <td class="home-label-value">{{home.BlockHeight}}</td>
                        </tr>
                        <tr>
                            <td class="home-label">Total Transactions</td>
                            <td class="home-label-value">{{#format-amount home.TotalTransactions}}</td>
                        </tr>
                        <tr>
                            <td class="home-label">Total Chains</td>
                            <td class="home-label-value">{{home.TotalChains}}</td>
                        </tr>
                    </tbody>
                </table>
                {{#async rates}}
            </div>
        </div>
    </div>

    <div class="col-sm-6">
        <div class="panel panel-default panel-phantasma" >
            <div class="panel-heading">Phantasma Transactions History <small>(Last 15 days)</small></div>
            <div class="panel-body">
                <div id="my-chart"></div>
            </div>
        </div>
    </div>
</div>

<script>
// TODO: add support for https://github.com/tmmdata/chartist-plugin-tooltip
function onStart(){

	let data = {
	  labels: [ {{#each home.Chart}}'{{Key}}', {{/each}}],
	  series: [
		[{{#each home.Chart}}{{Value}}, {{/each}}],
	  ]
	};

	let options = {
		fullWidth: true,
		height: 300,
		chartPadding: {
			right: 40
		}
	};

	new Chartist.Line('#my-chart', data, options);
}

</script>

<div class="row">
    <div class="col-sm-6">
        <div class="panel panel-default panel-phantasma">
            <div class="panel-heading">
                <i class="fas fa-cubes"></i> Blocks
                <div class="btn-group pull-right">
                    <a href="/blocks" class="btn btn-default btn-sm btn-view-all" style="margin-top: -4px;">View All</a>
                </div>
            </div>
            <div class="panel-body">
                <table class="table table-striped">
                    <tbody>
                        {{#each home.Blocks}}
                        <tr>
                            <td>
                                <span><a href="/block/{{Hash}}">Block {{Height}}</a></span><br>
                                <i>&gt;{{#timeago Timestamp}}</i>
                            </td>
                            <td>
                                Miner: {{#link-address MiningAddress}}<br>
                                Chain: <a href="/chain/{{ChainAddress}}">{{ChainName}}</a><br>
                                <a href="/txsblock/{{Hash}}"><strong>{{Transactions}} Txn</strong></a><br>
                                Block reward: {{Reward}} SOUL
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-sm-6">
        <div class="panel panel-default panel-phantasma">
            <div class="panel-heading">
                <i class="fas fa-database"></i> Transactions
                <div class="btn-group pull-right">
                    <a href="/transactions" class="btn btn-default btn-sm" style="margin-top: -4px;">View All</a>
                </div>
            </div>
            <div class="panel-body">
                <table class="table table-striped">
                    <tbody>
                        {{#each home.Transactions}}
                        <tr>
                            <td>
                                TX# {{#link-tx Hash}}<br>
                                <i>&gt;{{#timeago Block.Timestamp}} in <a href="/chain/{{Block.ChainAddress}}">{{Block.ChainName}}</a> chain</i><br>
                                {{{Description}}}<br>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>